# Сбор и хранение согласий

## Пользовательский поток

1. После заполнения анкеты бот показывает актуальный текст согласия на обработку персональных данных.
2. Пользователь подтверждает согласие кнопкой в диалоге.
3. В БД фиксируются: идентификатор пользователя и релиза, версия текста, полный текст и штамп времени принятия.
4. Пользователь может запросить копию согласия — бот отправляет сохранённый PDF/текст.

## Управление версиями текста

- Тексты хранятся в `app/resources/privacy_consent_v*.txt`.
- Актуальная версия задаётся в `.env` параметрами `CONSENT_VERSION` и `CONSENT_PATH`.
- При обновлении текста создайте новый файл с версией, обновите переменные окружения и задеплойте бота. Старые согласия остаются в истории.

## Доступ и аудит

- Все согласия доступны через административные инструменты бота или прямой SQL-доступ (таблица `consents`).
- Для выгрузок используйте выборку по диапазону дат, релизу или пользователю.
- Сохраняйте экспорт согласий вместе с бэкапами БД, соблюдая требования законодательства о персональных данных.
